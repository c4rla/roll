---
title: åšé¢˜ç¬”è®°02ï¼šäºŒåˆ†æŸ¥æ‰¾/æ’åº
description: Knuthï¼šã€Œæ²¡æœ‰äººæ¯”æˆ‘æ›´æ‡‚äºŒåˆ†æŸ¥æ‰¾ï¼ã€
slug: "oj-02"
date: 2022-04-02
tags: 
    - OJ
---

## BM17 äºŒåˆ†æŸ¥æ‰¾-I

å­¦ä¹ å¥—æ¨¡ç‰ˆï¼ˆé—­åŒºé—´æœç´¢ï¼‰ï¼Œè¿™ä¸ªæ¨¡ç‰ˆè¿˜å¯ä»¥ç”¨äºæœ‰é‡å¤æ•°å­—æ—¶æœç´¢å·¦ä¾§å’Œå³ä¾§è¾¹ç•Œï¼ˆåªè¦ä¿®æ”¹ target == nums[mid] å³å¯ï¼‰ã€‚

```python
class Solution:
    def search(self , nums: List[int], target: int) -> int:
        left, right = 0, len(nums) - 1 # ä½¿ç”¨é—­åŒºé—´ [0, length-1] åšäºŒåˆ†æŸ¥æ‰¾
        while left <= right: # å› ä¸ºæ˜¯é—­åŒºé—´ï¼Œç»ˆæ­¢æ¡ä»¶ä¸º left>right å³ [left, right] ä¸ºç©º
            mid = left + (right - left) // 2 # æ¨¡ç‰ˆçš„é˜²æº¢å‡ºï¼Œè™½ç„¶ Python ä¸ç”¨ç®¡
            if target == nums[mid]:
                return mid
            elif target > nums[mid]: # æœç´¢åŒºé—´æ”¹ä¸º [mid+1, length-1]
                left = mid + 1
            elif target < nums[mid]: # æœç´¢åŒºé—´æ”¹ä¸º [0, mid-1]
                right = mid - 1
        return -1 # æ²¡æ‰¾åˆ°ç»“æœ
```

## BM18 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾

å·¦ä¸Šè§’æ˜¯æœ€å°çš„æ•°ï¼Œå³ä¸‹è§’æ˜¯æœ€å¤§çš„æ•°ï¼Œå‡å¦‚ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œå¦‚æœ target æ¯”å·¦ä¸Šè§’çš„æ•°å¤§ï¼Œå°±æœ‰ä¸¤æ¡å¯èƒ½çš„è·¯å¾„ã€‚è™½ç„¶ä¸æ˜¯ä¸èƒ½åšï¼Œä½†æœ‰æ²¡æœ‰æ›´ç®€å•çš„åšæ³•ï¼Ÿ

æ•°ç»„ä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ä½ç½®åªæœ‰ä¸€æ¡è·¯å¾„ï¼šå³ä¸Šè§’å’Œå·¦ä¸‹è§’ã€‚å¦‚æœä»¥å³ä¸Šè§’ä½œä¸ºé¡¶ç‚¹ï¼Œæ¯ä¸ªå…ƒç´ çš„å·¦å…ƒç´ å’Œä¸‹å…ƒç´ ä½œä¸ºå­ç»“ç‚¹ï¼Œä¸éš¾çœ‹åˆ°è¿™æ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘ã€‚

```python
class Solution:
    def Find(self , target: int, array: List[List[int]]) -> bool:
        i, j = 0, len(array[0]) - 1 # i æ˜¯çºµåæ ‡ï¼Œ j æ˜¯æ¨ªåæ ‡ï¼Œä»å³ä¸Šè§’å¼€å§‹
        while j >= 0 and i < len(array) and target != array[i][j]:
            if target < array[i][j]:
                j = j - 1
            elif target > array[i][j]:
                i = i + 1
        return (j >= 0 and i < len(array))
```

## BM19 å¯»æ‰¾å³°å€¼

å¾ˆæ— èŠçš„ä¸€é“é¢˜ï¼Œä¸ºäº†ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç”Ÿé€ å‡ºæ¥çš„æ„Ÿè§‰â€¦â€¦

å‡ºå‘ç‚¹å¤§æ¦‚æ˜¯ï¼Œæ³¨æ„åˆ°å¦‚æœä¸­é—´å…ƒç´ æ¯”å³è¾¹å…ƒç´ å¤§ï¼Œåˆ™ä¸­é—´å…ƒç´ å¯èƒ½æ˜¯å³°å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¸­é—´å…ƒç´ çš„å·¦è¾¹ä¸€å®šæ¯”ä¸­é—´å…ƒç´ å¤§ï¼Œä¹Ÿå¯èƒ½æ˜¯å³°å€¼â€¦â€¦å¦‚æœæœ€å·¦è¾¹å…ƒç´ æ˜¯æœ€å¤§å€¼ç„¶åä¸€ç›´é€’å‡ï¼ŒæŒ‰ç…§é¢˜ç›®çš„æ¡ä»¶ï¼Œæœ€å·¦è¾¹å…ƒç´ ä¹Ÿç®—æ˜¯å³°å€¼ï¼Œå› æ­¤ä¸€å®šæœ‰å³°å€¼åœ¨ [0, mid] ä¹‹é—´ã€‚åŒç†ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ¯”å³è¾¹å…ƒç´ å°ï¼Œä¸€å®šæœ‰å³°å€¼åœ¨ [mid+1, length-1]ï¼š

```python
class Solution:
    def findPeakElement(self , nums: List[int]) -> int:
        left, right = 0, len(nums) - 1
        while left < right:
            mid = left + (right - left) // 2
            if nums[mid] > nums[mid+1]: # æœç´¢åŒºé—´å˜æˆ [0, mid]
                right = mid
            else: # æœç´¢åŒºé—´å˜æˆ [mid + 1, length-1]
                left = mid + 1
        return right # åŒºé—´ä¸€ç›´åœ¨æ”¶ç¼©ï¼Œç›´åˆ° left == right
```

## BM20 æ•°ç»„ä¸­çš„é€†åºå¯¹

ç»ˆäºé‡åˆ°ç¬¬ä¸€é“çœŸæ­£æ„ä¹‰ä¸Šçš„éš¾é¢˜ğŸ˜­

### æ–¹æ³•ä¸€ï¼šå½’å¹¶æ’åºï¼ˆCreditï¼šã€Šå‰‘æŒ‡Offerã€‹ï¼‰

æœ€å®¹æ˜“æƒ³åˆ°çš„è®¡ç®—æ–¹å¼æ˜¯æŒ‰å®šä¹‰è®¡ç®—ï¼Œå¦‚ {7,5,6,4} çš„æ­¥éª¤å¦‚ä¸‹ï¼š

1. æŠŠ 7 å’Œç»“æœä¸­çš„æ•°æ¯”è¾ƒï¼ˆ{}ï¼‰ï¼Œé€†åºæ•°ä¸º 0ï¼Œæ”¾å…¥ç»“æœä¸­ï¼›
2. æŠŠ 5 å’Œç»“æœä¸­çš„æ•°æ¯”è¾ƒï¼ˆ{7}ï¼‰ï¼Œé€†åºæ•°ä¸º 1ï¼Œæ”¾å…¥ç»“æœä¸­ï¼›
3. æŠŠ 6 å’Œç»“æœä¸­çš„æ•°æ¯”è¾ƒï¼ˆ{7,5}ï¼‰ï¼Œé€†åºæ•°ä¸º 1ï¼Œæ”¾å…¥ç»“æœä¸­ï¼›
4. æŠŠ 4 å’Œç»“æœä¸­çš„æ•°æ¯”è¾ƒï¼ˆ{7,5,6}ï¼‰ï¼Œé€†åºæ•°ä¸º 3ï¼Œæ”¾å…¥ç»“æœä¸­ï¼›
5. ç»“æŸï¼Œæ€»çš„é€†åºæ•°ä¸º 0+1+1+3=5ã€‚

æ˜¾ç„¶ç›´æ¥è®¡ç®—æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œä¸èƒ½æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œæœ‰æ²¡æœ‰åˆ«çš„æ–¹æ³•å‘¢ï¼Ÿè¯•è¯•é‡‡ç”¨åˆ†æ²»æ³•ï¼Œæ¯”å¦‚å½’å¹¶æ’åºï¼š

1. æŠŠ {7,5,6,4} ä¾æ¬¡åˆ’åˆ†æˆæœ€å°çš„éƒ¨åˆ†ï¼Œå³ {7},{5},{6},{4}ï¼›
2. å°è¯•åˆå¹¶ï¼š{7}{5} æ¯”è¾ƒæœ€åä¸€ä½çš„å¤§å°ï¼Œå› ä¸º 7>5ï¼Œé€†åºæ•°ä¸º 1ï¼ŒæŒ‰é¡ºåºåˆæˆ {5,7}ï¼›{6}{4} æ¯”è¾ƒæœ€åä¸€ä½çš„å¤§å°ï¼Œå› ä¸º 6>4ï¼Œé€†åºæ•°ä¸º 1ï¼ŒæŒ‰é¡ºåºæ•´ç†æˆ {4,6}ï¼›
3. æ¥ä¸‹æ¥éœ€è¦æ¯”è¾ƒ {5,7} å’Œ {4,6} çš„é€†åºæ•°ï¼Œé¦–å…ˆæ¯”è¾ƒæœ€åä¸€ä½ï¼Œå› ä¸º 7>6ï¼Œå³ {4,6} æ‰€æœ‰æ•°éƒ½æ¯” 7 å°ï¼Œé€†åºæ•° +2ï¼Œç»“æœæ”¾å…¥ {7}ï¼ŒæŒ‡é’ˆå·¦ç§»ï¼›
4. æŒ‡é’ˆå·¦ç§»åï¼Œæ¯”è¾ƒçš„æ˜¯ {5,6} çš„å¤§å°ï¼Œå› ä¸º 5<6ï¼Œé€†åºæ•°ä¸º 0ï¼ŒæŠŠ 6 æ”¾å…¥ç»“æœä¸­ï¼Œå˜æˆ {6,7}ï¼ŒæŒ‡é’ˆå·¦ç§»ï¼›
5. ä»¥æ­¤ç±»æ¨ï¼Œç°åœ¨æ¯”è¾ƒçš„æ˜¯ {5,4} çš„å¤§å°ï¼Œå› ä¸º 5>4ï¼Œé€†åºæ•°ä¸º 1ï¼ŒæŠŠ 5 æ”¾å…¥ç»“æœä¸­ï¼Œå˜æˆ {5,6,7}ï¼ŒæŒ‡é’ˆå·¦ç§»ï¼›
6. æœ€åæŠŠ {4} æ”¾å…¥ç»“æœä¸­å³å¯ï¼Œé€†åºæ•°ä¸º 1+1+2+0+1=5ã€‚

![ã€Šå‰‘æŒ‡ Offerã€‹é¢è¯•é¢˜ 51](merge_sort.jpeg)

è®¨åŒé€’å½’â€¦â€¦å‚è€ƒäº†é¢˜è§£çš„ä»£ç ï¼š

```python
class Solution:
    def InversePairs(self, data: List[int]) -> int:
        return self.MergeSort(data)[1] % 1000000007
    
    def MergeSort(self, data: List[int]):
        # è¿”å›æ’å¥½åºçš„æ•°æ®å’Œé€†åºæ•°
        # 1. å…ˆå†™é€€å‡ºæ¡ä»¶ï¼Œå³åªæœ‰ 0 ä¸ªæˆ–ä¸€ä¸ªå…ƒç´ çš„æƒ…å½¢
        if len(data) <= 1:
            return (data, 0)
        else:
            # 2. å¯»æ‰¾ä¸­ç‚¹ï¼ŒæŠŠæ•°ç»„åˆ‡å‰²æˆä¸¤éƒ¨åˆ†
            mid = len(data) // 2
            left, left_inverse = self.MergeSort(data[:mid])
            right, right_inverse = self.MergeSort(data[mid:])
            result = []
            count_inverse = left_inverse + right_inverse
            # 3. å¼€å§‹è¿›è¡Œå½’å¹¶æ’åº
            l, r = 0, 0
            while l < len(left) and r < len(right):
                if left[l] <= right[r]: # å·¦è¾¹ < å³è¾¹ï¼Œé€†åºæ•°ä¸º 0
                    result.append(left[l])
                    l += 1
                else: # å·¦è¾¹ > å³è¾¹ï¼Œé€†åºæ•°ä¸ºå·¦è¾¹æŒ‡é’ˆå³è¾¹æ‰€æœ‰å…ƒç´ ä¸ªæ•°ï¼ˆå«ï¼‰
                    count_inverse += len(left) - l
                    result.append(right[r])
                    r += 1
            result += left[l:] + right[r:] # æ¯”è¾ƒç»“æŸï¼Œæ¥ä¸Šå‰©ä¸‹çš„å…ƒç´ 
            return result, count_inverse
```

### æ–¹æ³•äºŒï¼šå¿«é€Ÿæ’åºï¼ˆCreditï¼šé¢˜è§£ï¼‰

åŒæ ·æ˜¯åˆ†æ²»ç­–ç•¥ï¼Œæ—¢ç„¶å¯ä»¥ç”¨å½’å¹¶ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½ç”¨å¿«æ’ï¼Ÿä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºé€†åºæ•°æœ¬è´¨ä¸Šæ˜¯æ¯”è¾ƒæ‰€æœ‰çš„ä¸¤ä¸¤ç»„åˆï¼Œå¿«é€Ÿæ’åºçš„æ—¶å€™ï¼Œé¦–å…ˆé€‰æ‹©ä¸»å…ƒï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œç„¶åæŠŠæ‰€æœ‰æ•°åˆ†æˆå¤§äºä¸»å…ƒå’Œå°äºä¸»å…ƒä¸¤ä¸ªç‹¬ç«‹éƒ¨åˆ†ï¼Œæ­¤æ—¶å°±å®Œæˆäº†ï¼š

1. ä¸»å…ƒå’Œæ‰€æœ‰å…¶ä»–å…ƒç´ çš„æ¯”è¾ƒï¼›
2. å¤§äºä¸»å…ƒçš„å…ƒç´ ä¸å°äºä¸»å…ƒçš„å…ƒç´ çš„é€ä¸€ç›¸äº’æ¯”è¾ƒï¼Œå‡†ç¡®çš„è¯´ï¼Œæ˜¯æ‰€æœ‰æ¯”ä¸»å…ƒå°çš„å…ƒç´ ï¼Œå’Œæ’åœ¨è¯¥å…ƒç´ å‰é¢ä¸”å¤§äºä¸»å…ƒçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼ˆä¸ºä»€ä¹ˆç›¸ç­‰ï¼Ÿå› ä¸ºæ±‚çš„æ˜¯é€†åºæ•°ï¼‰ã€‚

äºæ˜¯æ¥ä¸‹æ¥åªéœ€è¦é€’å½’åœ°å¯¹å¤§äºä¸»å…ƒå’Œå°äºä¸»å…ƒçš„å…ƒç´ åˆ†åˆ«æ‰§è¡Œç›¸åŒæ“ä½œå³å¯ã€‚

```python
class Solution:
    def InversePairs(self, data: List[int]) -> int:
        return self.QuickSort(data) % 1000000007
    
    def QuickSort(self, data: List[int]):
        # åŒæ ·å…ˆå†™é€€å‡ºæ¡ä»¶
        if len(data) <= 1:
            return 0
        else:
            bigger, smaller = [], []
            count_inverse = 0
            pivot = data[0]
            for num in data[1:]:
                if num > pivot:
                    bigger.append(num)
                else:
                    smaller.append(num)
                    count_inverse += len(bigger) + 1
            return count_inverse + self.QuickSort(bigger) + self.QuickSort(smaller)
```

### æ‰©å±•ï¼šæ ‘çŠ¶æ•°ç»„/çº¿æ®µæ ‘

~~é¡¾åæ€ä¹‰ï¼Œæ ‘çŠ¶æ•°ç»„å°±æ˜¯é•¿å¾—åƒæ ‘ä¸€æ ·çš„æ•°ç»„ï¼~~

![Credit: OI Wiki](BIT.jpg)

æ ‘çŠ¶æ•°ç»„çš„ä¼˜ç‚¹æ˜¯å¯ä»¥ä»¥å¯¹æ•°æ—¶é—´å¤æ‚åº¦è·å¾—å…ƒç´ å›ºå®šçš„æ•°åˆ—å‰ N é¡¹çš„å’Œï¼ˆå…¶å®ä»»æ„åŒºé—´çš„å’Œéƒ½å¯ä»¥ï¼‰ï¼Œè¿™å’Œé€†åºæ•°æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ

å›é¡¾æœ€å¼€å§‹çš„åšæ³•ï¼Œæˆ‘ä»¬ä»å·¦åˆ°å³æ±‚å‡ºæ¯ä¸ªæ•°ä¹‹å‰æ¯”å®ƒå¤§çš„æ•°çš„ä¸ªæ•°ï¼Œç´¯åŠ èµ·æ¥å°±æ˜¯ç­”æ¡ˆã€‚å¦‚æœå­˜åœ¨æŸç§èƒ½ä»¥ O(log(n)) æ—¶é—´å¤æ‚åº¦è®¡ç®—å‡ºâ€œæ¯”å®ƒå¤§çš„æ•°çš„ä¸ªæ•°â€çš„æ•°æ®ç»“æ„ï¼Œæ—¶é—´å¤æ‚åº¦å°±é™åˆ° O(nlog(n)) äº†ï¼š

1. éå†æ•°ç»„ï¼Œäº†è§£æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å–å€¼èŒƒå›´ï¼Œå‡è®¾å–å€¼èŒƒå›´ä¸º 0<=x<=1000ï¼Œæ–°å»ºä¸€ä¸ªé•¿åº¦ä¸º 1001 çš„æ ‘çŠ¶æ•°ç»„ï¼ŒæŠŠæ‰€æœ‰å…ƒç´ åˆå§‹æˆ 0ã€‚è¿™ä¸ªæ ‘çŠ¶æ•°ç»„ç”¨äºå­˜å‚¨åˆ°ç›®å‰ä¸ºæ­¢æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ã€‚å…¶å®ä¹Ÿæœ‰ä¸åŒçš„åšæ³•ï¼Œæ¯”å¦‚æœ‰çš„äººä¼šå¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶é‡æ–°ç¼–å·ï¼Œç§°ä¸º [ç¦»æ•£åŒ–](https://oi-wiki.org/misc/discrete/)ï¼›
2. è¯»å–ç¬¬ä¸€ä¸ªå…ƒç´  aï¼ŒæŠŠæ ‘çŠ¶æ•°ç»„ä¸­ a å¯¹åº”çš„æ•°æ® +1ï¼ˆO(log(n))ï¼‰ï¼›
3. æ­¤æ—¶è®¡ç®—æ ‘çŠ¶æ•°ç»„ä¸­ [0, a] åŒºé—´çš„å’Œï¼ˆO(log(n))ï¼‰ï¼Œè¿™ä¸ªå’Œè¡¨ç¤ºç›®å‰ä¸ºæ­¢çš„æ•°ç»„å…ƒç´ ä¸­ <= a çš„å…ƒç´ ä¸ªæ•°ï¼Œä½¿ç”¨å½“å‰çš„ä½ç½® 1 å‡å»å®ƒï¼Œå°±å¾—åˆ°æ­¤å…ƒç´ çš„é€†åºæ•°ï¼›
4. éå†æ•°ç»„æ‰€æœ‰å…ƒç´ ï¼ŒæŠŠæ‰€æœ‰é€†åºæ•°åŠ èµ·æ¥ï¼Œå°±å¾—åˆ°äº†ç­”æ¡ˆã€‚

æ ‘çŠ¶æ•°ç»„å’Œçº¿æ®µæ ‘çš„å®ç°ä»£ç å¯ä»¥å‚è€ƒ [OI Wiki](https://oi-wiki.org/ds/fenwick/)ï¼Œ~~æ—¢ç„¶è®°ä¸ä½ï¼Œåº”è¯¥ä¸ä¼šè€ƒå§â€¦â€¦~~


## BM21 æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—

å’Œ BM19 ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸ºäº†è€ƒå¯ŸäºŒåˆ†æŸ¥æ‰¾é€ å‡ºæ¥çš„é¢˜ï¼Œå‡è®¾æ•°ç»„ç”± AB å˜æˆ BAï¼š

1. å‡è®¾æ•°æ®ä¸º [3,4,5,1,2]ï¼Œé¦–å…ˆç¡®å®š left=3, mid=5, right=2ï¼›
2. å› ä¸º mid > rightï¼Œæ•°ç»„æ˜¯éé™çš„ï¼Œæ•… mid ä¸€å®šåœ¨ Bï¼Œright ä¸€å®šåœ¨ Aï¼Œæœ€å°å€¼ä¸€å®šåœ¨ [mid+1, right] ä¸­ã€‚æ›´æ–°åŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼›
3. åŒç†ï¼Œå¦‚æœ mid < rightï¼Œè¯´æ˜ mid å’Œ right éƒ½åœ¨ A ä¸­ï¼Œæœ€å°å€¼æ˜¯ B å’Œ A çš„äº¤ç•Œç‚¹ï¼ˆA çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œæ•…ä¸€å®šåœ¨ [left, mid] ä¸­ï¼Œæ›´æ–°åŒºé—´è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼›
4. æœ€åï¼Œå¦‚æœ mid == rightï¼Œå› ä¸ºæ•°ç»„æ˜¯éé™çš„ï¼Œå¯ä»¥è‚¯å®š right ä¸€å®šä¸æ˜¯æœ€å°å€¼ï¼Œæ•…æœç´¢åŒºé—´æ”¹ä¸º [left, right-1]ï¼›
5. åŒºé—´ä¸æ–­ç¼©å°ï¼Œå½“ left == right æ—¶è¿”å›ç»“æœã€‚

ä¾ç„¶æ˜¯å¥—æ¨¡æ¿ï¼š

```python
class Solution:
    def minNumberInRotateArray(self , rotateArray: List[int]) -> int:
        if len(rotateArray) == 0:
            return None
        left, right = 0, len(rotateArray) - 1
        while left < right:
            mid = left + (right - left) // 2
            if rotateArray[mid] > rotateArray[right]: # [mid+1, right]
                left = mid + 1
            elif rotateArray[mid] < rotateArray[right]: # [left, mid]
                right = mid
            elif rotateArray[mid] == rotateArray[right]: # [left, right-1]
                right = right - 1
        return rotateArray[left]
```

## BM22 æ¯”è¾ƒç‰ˆæœ¬å·

æ„Ÿæ© Pythonï¼

```python
class Solution:
    def compare(self , version1: str, version2: str) -> int:
        version1 = [int(i) for i in version1.split('.')]
        version2 = [int(i) for i in version2.split('.')]
        # å› ä¸º Python ä¸­ [1,0] < [1,0,0]
        if len(version1) > len(version2):
            version2 += [0,] * (len(version1) - len(version2))
        else:
            version1 += [0,] * (len(version2) - len(version1))
        if version1 < version2:
            return -1
        elif version1 == version2:
            return 0
        else:
            return 1
```